---
layout: post
title: A Few Easy (?) JRuby 1.1 Bugs
date: '2007-12-20T10:11:00.000-08:00'
author: headius
tags: 
modified_time: '2011-01-25T21:44:32.036-08:00'
blogger_id: tag:blogger.com,1999:blog-4704664917418794835.post-4785124566234999146
blogger_orig_url: http://blog.headius.com/2007/12/few-easy-jruby-11-bugs.html
---

When I posted on a few easy JRuby 1.0.2 bugs a couple months ago, I got a great response. So since I'm doing a bug tracker review today for JRuby 1.1, here's a new list for intrepid developers.<br /><br /><a href="http://jira.codehaus.org/browse/JRUBY-1555">DST bug in second form of Time.local</a> - This doesn't seem like it should be hard to correct, provided we can figure out what the correct behavior is. We've recently switch JRuby to Joda Time from Java's Calendar, so this one may have improved or gotten easier to resolve.<br /><br /><a href="http://jira.codehaus.org/browse/JRUBY-1520">Installing beta RubyGems fails</a> - This actually applies to the current release of RubyGems, 1.0.0...I tried to do the update and got this nasty error, different from the one originally reported. Someone more knowledgable about RubyGems internals could probably make quick work of this.<br /><br /><a href="http://jira.codehaus.org/browse/JRUBY-1487">weakref.rb could (should?) be implemented in Java</a> - So I already went ahead and did this, because it was a trivial bit of work (and perhaps a good piece of code to look at it you want to see how to easily write extensions to JRuby). But what's still missing are any sort of weakref tests or specs. My preference would be for you to add specs to Rubinius's suite, which will someday soon graduate to a top-level standard test suite of its own. But at any rate, a nice set of tests/specs for weakref would do good for everyone.<br /><br /><a href="http://jira.codehaus.org/browse/JRUBY-1456">AnnotationFormatError when running trunk jruby-complete --command irb</a> - This is actually a JarJar Links problem that we're using a patched version for right now. Problem is...even the current jarjar-1.0rc6 still breaks when I incorporate it into the build. These sorts of bugs can drive a person mad, so if anyone wants to shag out what's wrong with jarjar here, we'd really appreciate it.<br /><br /><a href="http://jira.codehaus.org/browse/JRUBY-1362">Failure in ruby_test Numeric#truncate test</a> - The first of a few trivial numeric failures from Daniel Berger's "ruby_test" suite. Pretty easy to jump into, I would expect.<br /><br /><a href="http://jira.codehaus.org/browse/JRUBY-1361">Failure in ruby_test Numeric#to_int test</a> - And another, perhaps the same sort of issue.<br /><br /><a href="http://jira.codehaus.org/browse/JRUBY-891">IO.select does not work properly with timeout</a> - This one would involve digging into JRuby IO code a bit, but for someone who knows IO reasonably well it may not be difficult. The primary issue is that while almost all other types of IO in JRuby use NIO channels, stdio does not. So basically, you can't do typical non-blocking IO operations against stdin, stdout, or stderr. Think you can tackle it?<br /><br /><a href="http://jira.codehaus.org/browse/JRUBY-867">Iconv character set option //translit is not supported</a> - The Iconv library, used by MRI for character encoding/decoding/transcoding, supports more transliteration options than we've been able to emulate with Java's CharSet classes. Do you know of a way to support Iconv-like transliteration in Java?<br /><br /><a href="http://jira.codehaus.org/browse/JRUBY-852">jirb exits on ESC followed by any arrow key followed by return</a> - this is actually probably a Jline bug, but maybe one that's easily fixed?<br /><br /><a href="http://jira.codehaus.org/browse/JRUBY-551">bfts test_file_test failures</a> - The remaining failures here seem to mostly be because we don't have UNIXServer implemented (since UNIX domain sockets aren't supported on the JVM). However, since JRuby ships with JNA, it could be possible for someone familiar with UNIX socket C APIs to wire up a nice implementation for us. And for that matter, it would be useful for just about anyone who wants to use UNIX sockets from Java.<br /><a href="http://jira.codehaus.org/browse/JRUBY-334"><br />Process module does not implement some methods</a> - Again, here's a case where it probably would be easy to use JNA to add some missing POSIX/libc functions to JRuby.<br /><br /><a href="http://jira.codehaus.org/browse/JRUBY-191">Implement win32ole library using one of the available Java-COM bridges</a> - This one already has a start! Some fella named Rui Lopes started implementing the Win32OLE Ruby library using Jacob, a Java/COM bridge. I'd love to see this get completed, since Ruby's DSL capabilities map really nicely to COM/ActiveX objects. (It's also complicated by the fact that most of the JRuby core team develops on Macs.)<br /><br /><a href="http://jira.codehaus.org/browse/JRUBY-98">allow "/" as absolute path in Windows</a> - this is the second oldest JRuby 1.1-flagged bug, and from reviewing the comments we still aren't sure the correct way to make it work. It can't be this hard, can it?<br /><br /><a href="http://jira.codehaus.org/browse/JRUBY-61">IO CRLF compatibility with cruby on Windows</a> - Another Windows-related bug that really should be brought to a close. Koichiro Ohba started looking into it some time ago, but we haven't heard from him recently. This is the oldest JRuby 1.1 bug, numbered JRUBY-61, and is actually the second-oldest open bug overall. Can't someone help figure this bloody thing out?