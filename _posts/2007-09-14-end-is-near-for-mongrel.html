---
layout: post
title: The End Is Near For Mongrel
date: '2007-09-14T12:52:00.000-07:00'
author: headius
tags: 
modified_time: '2011-01-25T21:44:32.514-08:00'
blogger_id: tag:blogger.com,1999:blog-4704664917418794835.post-7000295062178948996
blogger_orig_url: http://blog.headius.com/2007/09/end-is-near-for-mongrel.html
---

At conferences and online, Tom and I have long been talking about a mystery deployment option coming soon from the GlassFish team. It would combine the agile command-line-friendly model of Mongrel with the power and simplicity of deploying to a Java application server. We have shown a few quick demos, but they have only been very simple and very limited. Plus there was no public release we could give people.<br /><br />Until Now.<br /><br />Today, you can finally download the <a href="http://download.java.net/maven/glassfish/com/sun/enterprise/glassfish/glassfish-gem/10.0-SNAPSHOT/">GlassFish-Rails preview release gem</a>.<br /><br />So what is this tasty little morsel? Well, it's a 2.9MB Ruby gem containing the GlassFish server and the Grizzly connector for JRuby on Rails. It installs a "glassfish_rails" script in JRuby's bin directory, and you're done.<br /><br />Witness!<br /><span style="font-size:-1;"><pre>~ $ gem install glassfish-gem-10.0-SNAPSHOT.gem<br />Successfully installed GlassFish, version 10.0.0<br />~ $ glassfish_rails testapp<br />Sep 14, 2007 3:00:45 PM com.sun.enterprise.v3.services.impl.GrizzlyAdapter postConstruct<br />INFO: Listening on port 8080<br />Sep 14, 2007 3:00:46 PM com.sun.enterprise.v3.services.impl.DeploymentService postConstruct<br />INFO: Supported containers : phobos,php,web,jruby<br />Sep 14, 2007 3:00:46 PM com.sun.grizzly.standalone.StaticResourcesAdapter &lt;init&gt;<br />INFO: New Servicing page from: /Users/headius/testapp/public<br />/Users/headius/NetBeansProjects/jruby/lib/ruby/gems/1.8/gems/actionmailer-1.3.3/lib/action_mailer.rb:50 warning: already initialized constant MAX_LINE_LEN<br />Sep 14, 2007 3:00:53 PM com.sun.enterprise.v3.server.AppServerStartup run<br />INFO: Glassfish v3 started in 9233 ms</pre></span><br />That's all there is to it...you've got a production-ready server. Oh, did I mention you only have to run one instance? No more managing a dozen mongrel processes, ensuring they stay running, starting and stopping them all. One command, one process.<br /><br />Of course this is a preview...we expect to see bug reports and find issues with it. For example, it currently deploys under a context rather than at the root of the server, so my app above would be available at <span style="font-family: courier new;">http://localhost:8080/testapp</span> instead of <span style="font-family: courier new;">http://localhost:8080/</span>. That's going to be fixed soon (and configurable) but for now you'll want to set the following in environment.rb:<br /><pre>ActionController::AbstractRequest.relative_url_root = "/&lt;app name&gt;/"<br />ActionController::CgiRequest.relative_url_root = "/&lt;app name&gt;/"</pre><br />And of course, you're going to be running JRuby, so you'll need to take that into consideration. JRuby's general Rails performance still needs more tweaking and work to surpass Mongrel + Ruby, but out of the box you already get stellar static-file performance with the GlassFish gem...something like 2500req/s for the testapp index page on my system. The remaining JRuby performance is continuing to improve as well...we'll get there soon.<br /><br />So! Give it a try, report bugs on the <a href="https://glassfish.dev.java.net/servlets/ProjectIssues">GlassFish issue tracker</a>, and let us know on the <a href="https://glassfish.dev.java.net/servlets/ProjectMailingListList">GlassFish mailing lists</a> what you'd like to see improved.<br /><br />Mongrel...your days are numbered.