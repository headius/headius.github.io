---
layout: post
title: Help JRuby by Fixing RubySpecs
date: '2009-05-14T18:34:00.000-07:00'
author: headius
tags: 
modified_time: '2011-01-25T21:44:30.840-08:00'
blogger_id: tag:blogger.com,1999:blog-4704664917418794835.post-5416684804087213617
blogger_orig_url: http://blog.headius.com/2009/05/help-jruby-by-fixing-rubyspecs.html
---

A number of you have asked how you can help JRuby development. Well there's actually an easy way: fix <a href="http://www.rubyspec.org/">RubySpec</a> failures.<br /><br />You may have noticed we periodically update our RubySpec "stable" revision number, and usually have to file a few bugs. This isn't because we don't want to fix those issues...on the contrary, we would love to fix them. We just don't have enough manpower, and there's usually harder issues we need to tackle first.<br /><br />But most of the failures are easy to fix, and a lot of JRuby newcomers have gotten their feet wet fixing them. So here's a short guide on how to run the specs and fix them quickly.<br /><br />1. Get a JRuby working copy and build it<br /><br />This is as simple as '<span class="Apple-style-span"  style="font-family:'courier new';">git clone git://github.com/jruby/jruby.git</span>', then '<span class="Apple-style-span"  style="font-family:'courier new';">cd jruby</span>' and '<span class="Apple-style-span"  style="font-family:'courier new';">ant</span>'. You'll need <a href="http://ant.apache.org/bindownload.cgi">Apache Ant 1.7</a> and Java 5/1.5 or higher (grab "Java SE Development Kit" from the <a href="http://java.sun.com/javase/downloads/index.jsp">Java SE downloads page</a>.<br /><br />2. Run the CI spec run<br /><br />We have a clean spec run that should be clean for you before you start. Just run <span class="Apple-style-span"  style="font-family:'courier new';">"ant spec-short</span>" and it will pull the mspec and rubyspec repositories, roll them to the stable versions, and run all known good specs. Now you're ready to investigate specific failures.<br /><br />3. Run specific spec files with bugs reported<br /><br />You can look in <a href="http://jira.codehaus.org/secure/IssueNavigator.jspa?reset=true&amp;&amp;pid=11295&amp;resolution=-1&amp;component=13420&amp;sorter/field=priority&amp;sorter/order=DESC">Jira under the "RubySpec" category</a>, or look under spec/tags/ruby for "tag" files listing failing specs and Jira bug numbers. Once you find something you'd like to investigate, run that spec file using "<span class="Apple-style-span"  style="font-family:'courier new';">bin/jruby spec/mspec/bin/mspec &lt;path/to/spec/file&gt;</span>". For example to set the Range#initialize failures I just reported, run "<span class="Apple-style-span"  style="font-family:'courier new';">bin/jruby spec/mspec/bin/mspec spec/ruby/core/range/initialize_spec.rb</span>".<br /><br />Now you can proceed to fixing it.<br /><br />4. Identify where the problem is.<br /><br />Most of the core classes are pretty easy to locate. Any classes in the "core" specs will have a Java class named Ruby<class>, like RubyArray, RubyRange, and so on. They're generally located in src/org/jruby. If you know any Java, these files are pretty easy to follow, and we're standing by on IRC or on the mailing list to hold your hand at the start.<br /><br />5. Create a patch and submit it to the bug<br /><br />Once you have a working fix, you can go ahead create a patch, either with "<span class="Apple-style-span"  style="font-family:'courier new';">git diff > somefile.patch</span>" or by committing it to your local repository and using "<span class="Apple-style-span"  style="font-family:'courier new';">git format-patch -1</span>" to create a formatted patch for the topmost commit. Some git-fu may be necessary, so I usually just use "<span class="Apple-style-span"  style="font-family:'courier new';">git diff</span>".<br /><br />That's all there is to it! You'll be a JRuby contributor in no time!</class>