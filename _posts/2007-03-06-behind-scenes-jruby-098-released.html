---
layout: post
title: 'Behind The Scenes: JRuby 0.9.8 Released!'
date: '2007-03-06T06:56:00.000-08:00'
author: headius
tags:
- rails
- jruby release
- jruby
modified_time: '2011-01-25T21:44:33.093-08:00'
blogger_id: tag:blogger.com,1999:blog-4704664917418794835.post-8724159315673909079
blogger_orig_url: http://blog.headius.com/2007/03/behind-scenes-jruby-098-released.html
---

Things have been moving quickly in JRuby-land, and we've just kicked out a <span style="font-weight: bold;">major</span> release in JRuby 0.9.8. Among the big features:<br /><ul><li>Ruby classes can extend concrete/abstract Java classes and override methods</li><li>New Java primitive array syntax</li><li>Reimplementation of String, Numeric classes, and Array to be more correct and performant</li><li>Significant bottlenecks have been identified. In some cases IO is 6.5x faster than previous releases. Java included classes are significantly faster than in the past.</li><li>220 Jira issues resolved since last release</li></ul>Now these are certainly delicious. Performance improvements are always great, and we're been improving Java integration little by little. But there's another bullet I omitted that is worth a little more attention:<br /><ul><li>Ruby on Rails support</li></ul>Now you may feel free to read that as you wish. I read it as "we expect pure-Ruby Rails apps to work." By "pure Ruby", I mean no unsupported C-language extensions required. By "work" I mean "work."<br /><br />It was our original plan over two months ago that by Februrary's end we'd be passing enough of Rails' own test cases to call it "supported". And in a relative rarity for an open source project, we hit that milestone. It was actually early last week we started saying we officially support Rails, which at the time meant better than 95% of Rails test cases passing. By the time we cleaned up the remaining release items, we had passed 98%. And we're still climbing.<br /><br />So what does this mean for a practical Rails user? Well, it means that the dream of deploying Rails apps on any Java-based server in any Java-based organization is another big step closer to coming true. I've actually been demoing Rails apps running in a WAR file on GlassFish for all my recent talks, and it's pretty solid. I don't imagine it's perfect, of course, but it's looking really very good. It will be "ready" by the time we hit 1.0.<br /><br />A few folks have been wondering about the jump from JRuby 0.9.2 to JRuby 0.9.8. The simple answer is this: we're two releases away from 1.0. We wanted to make it obvious how much work has gone into 0.9.8 (as many SVN revisions in this release as the last three combined) and show our commitment to getting a 1.0 release out very soon. The 0.9.8 release will be followed by 0.9.9, which will be followed by...well, you get the picture. We're in the home stretch now.<br /><br />The other core team members have reported on the release, so I won't cover all that. Here's a list of links:<br /><br /><a href="http://www.bloglines.com/blog/ThomasEEnebo?id=27">Tom Enebo</a><br /><a href="http://ola-bini.blogspot.com/2007/03/jruby-098-is-here.html">Ola Bini</a><br /><a href="http://blog.nicksieger.com/articles/2007/03/06/countdown-to-1-0-jruby-0-9-8-released">Nick Sieger</a><br /><br />In related news, there's also a new release of ActiveRecord-JDBC, the gem-installable module enabling JDBC databases to be used by ActiveRecord. This is also very welcome, since there have been a number of bug fixes in trunk that weren't easily installable the past couple months. Now you should be able to run both Rails 1.2.2 and 1.1.6 well with JRuby, just using released code. It helps complete the puzzle.<br /><br />So what's next for JRuby? Well, with the 0.9.8 release we've reached a really big milestone as far as Ruby compatibility, so we're likely to turn our attentions toward areas not directly related to Ruby 1.8. Specifically:<br /><ul><li>Work will continue on the bytecode compiler, and I'm hoping to have the JIT permanently enabled within the next week</li><li>Java integration will get a heavier focus, to start bringing us more in line with languages like Groovy for ease-of-integration. In general things are looking pretty solid right now, but we know there's a lot of work to do here. I'd like for us to come as close as possible to Groovy's level of tight integration as possible.</li><li>We will also start working on native Unicode support, by exposing a Chars class like the one provided in Rails' MultiByte library. This will allow us to maintain compatibility with Ruby and provide solid Unicode support without introducing an incompatible set of features.</li><li>Both Tom and Ola have expressed an interest in continuing work on our Ruby 2.0 bytecode engine. Ola would like to continue improving and expanding the bytecode support, while Tom would like to play with a second parser that goes straight to bytecode. Both of those will help feed into a potentially faster interpreted mode in the future, giving us many of the perf gains shown in Ruby 1.9 benchmarks.</li></ul>For me personally, performance is going to be the big item. The recent <a href="http://www.antoniocangiano.com/articles/2007/02/19/ruby-implementations-shootout-ruby-vs-yarv-vs-jruby-vs-gardens-point-ruby-net-vs-rubinius-vs-cardinal">Ruby Shootout</a> showed that we have some work to do to bring out performance up to MRI standards, but it didn't tell the whole story. The truth of the matter is more like this:<br /><ul><li>JRuby interpreted mode is roughly 3-4x as slow as Ruby 1.8</li><li>JRuby compiled mode is roughly 1.5-2x <span style="font-weight: bold;">faster</span> than Ruby 1.8</li><li>KRI (Ruby 1.9, "Koichi's Ruby Implementation") is many times faster than MRI for the posted benchmarks</li><li>KRI is 2x or less faster than MRI for the general case</li></ul>And this is without us doing any optimization of the compiler or adding in any special-case optimizations like KRI provides for fixnums. We're still looking great for future performance, and I want to start tackling this area heavily over the next couple months.<br /><br />As always, we welcome contributors, bug reports, patches, and user anecdotes for JRuby. We love to hear about bugs, we want to know your opinion, and we respect and honor our community whenever we get the chance. Remember, JRuby is <span style="font-weight: bold;">your</span> project, and can only be successful with your help.<br /><br />Visit <a href="http://www.jruby.org/">www.jruby.org</a> to learn more about the project, download the release, and <span style="font-weight: bold;">get involved</span>!<br /><br />On to the next release!