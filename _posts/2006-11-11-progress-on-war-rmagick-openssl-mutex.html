---
layout: post
title: Progress on WAR, RMagick, OpenSSL, Mutex Fronts
date: '2006-11-11T05:49:00.000-08:00'
author: headius
tags: 
modified_time: '2011-01-25T21:44:33.667-08:00'
blogger_id: tag:blogger.com,1999:blog-4704664917418794835.post-2785541897082225148
blogger_orig_url: http://blog.headius.com/2006/11/progress-on-war-rmagick-openssl-mutex.html
---

The JRuby community continues to pick up steam!<br /><br />A number of JRubyists have recently started actively looking at the problem of deploying Rails apps as a WAR file. Some have working prototypes as well. However the most interesting development is that a number of them have joined the <a href="http://rubyforge.org/projects/jruby-extras/">jruby-extras project on RubyForge</a> to combine their efforts. I'll be helping to oversee their progress, but this is a perfect example of a community-driven project. I don't doubt they'll make great progress.<br /><br />RMagick will soon have a full-featured equivalent for JRuby. Tom Palmer has been working on a Java-based RMagick for some time, and now has a version of his <a href="http://bagotricks.com/blog/2006/11/11/gruff-graphs-in-jruby/">RMagickJr that can render some basic Gruff Graphs</a>. He's been in communication with the RMagick creator, and it's likely that we'll start to see gems available soon. Tom's work will help ensure that Rails apps using RMagick for image processing can work seamlessly under JRuby as well. RMagickJr is also hosted in the jruby-extras project.<br /><br />Ola Bini has been continuing his quest to bring the openssl library to JRuby. He says he's getting very close to having a working library, and it's been a long, hard road. Full support for openssl will mean all Ruby libraries that depend on it will work without modification on JRuby. It's quite an effort, and Ola deserves a lot of credit for making it happen.<br /><br />At RubyConf 2006, Matz and Koichi made the announcement that Thread.critical was very likely to go away in Ruby 1.9.1/2.0. The reasons for this are simple, and well-known to the JRuby project: Thread.critical is incompatible with native threading. My own implementations of Thread.critical have ranged from a very strict version which frequently deadlocked to the current version which only enforces critical sections in a very loose sense. I am very pleased to hear that critical will go away, but that doesn't help us now. However, there's hope. MenTaLguY has recently taken on the challenge of <a href="http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-core/9449">implementing a fast Mutex</a> for both the C and Java versions of Ruby (MRI and JRuby, respectively). As I understand it, the current C implementation he's built exceeds even low-level Thread.critical performance, and we both agree that a Java version should be extremely easy to construct using Java's built-in synchronization capabilities. A fast Mutex is the first step toward moving people off Thread.critical...and saving me doing yet another doomed reimplementation of it in JRuby.<br /><br />Other news:<br /><br />Tom and I spoke with some folks from the HotSpot VM team last night, and it was an extremely helpful discussion. We talked about Ruby's language design and quirkier features, the future of dynlangs on the VM, compilation and optimization strategies for dynlangs, and the current roadmap for JRuby development. Bottom line: everything we're doing is right, and if we keep on this course we'll rapidly approach their notion of an optimal Ruby implementation. We also agreed there's very little about Ruby that couldn't be compiled straight down to Java code. It was great vindication to hear that our "best guess" strategies for slowly redesigning, refactoring, and compiling JRuby are all on the right track. It was also great to hear that our confidence in the JVM has not been misplaced: it IS an excellent VM for dynlangs, and JRuby should eventually perform extremely well. The future of Ruby on the JVM is looking great.<br /><br />I will be presenting JRuby again today at the <a href="http://www.twincitiescodecamp.com/TCCC/Default.aspx">Twin Cities Code Camp</a>, as one of the few Java-based presentations (the rest being primarily .NET-related). I guess that's all there is to say about that...it's going to be a condensed version of the Gateway JUG presentation with fewer walkthroughs and a much shorter overall time.<br /><br />Tom and I are also scheduling our trip to Europe in December. We'll be in Prague from the 5th to the 9th to meet with the <a href="http://www.netbeans.org/community/teams/dev/">NetBeans development team</a>; in Antwerp the following week for <a href="http://www.javapolis.com/confluence/display/JP06/Home">JavaPolis</a>; and in Rotterdam on the 19th for my JRuby presentation at <a href="http://finalist.com/">Finalist</a>. It remains to be seen if I'll spend some of the holidays in Europe or if my wife will join me, but if you'd like to propose any speaking engagements that could keep me in the Old Country, certainly let me know :)