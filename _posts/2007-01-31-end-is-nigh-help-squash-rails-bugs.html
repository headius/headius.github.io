---
layout: post
title: 'The End is Nigh: Help Squash Rails Bugs'
date: '2007-01-31T08:09:00.000-08:00'
author: headius
tags: 
modified_time: '2011-01-25T21:44:33.237-08:00'
blogger_id: tag:blogger.com,1999:blog-4704664917418794835.post-3052720984483023723
blogger_orig_url: http://blog.headius.com/2007/01/end-is-nigh-help-squash-rails-bugs.html
---

My friends, the end of the road is in sight for official Rails support.<br /><br />Tom, Ola, and I have been working over the past week to get remaining Rails issues wrapped up. As a result of our efforts:<br /><ul><li>ActionPack is now "practically" 100% working, minus a test or two we can't support and a few tests that are broken or that run fine in isolation (it would be nice to know *why* those fail)</li><li>ActiveSupport is well above 95% passing</li><li>ActiveRecord is in the 90% range passing with MySQL and in the 80% range with Derby</li></ul>The remaining modules are still yet to be worked, but they are mostly in high % as well: ActionWebService, ActionMailer, Railties<br /><br />So here is a set of instructions on how YOU, dear reader, can help round out JRuby's support for Ruby on Rails.<br /><ol><li>Getting a testbed set up<br /><ol><li>Update JRuby trunk (<a href="http://svn.codehaus.org/jruby/trunk/jruby">http://svn.codehaus.org/jruby/trunk/jruby</a>), build it (ant clean jar), love it</li><li>Install Rake (gem install rake)</li><li>Fetch Rails 1.2.1 from Rails SVN at <a href="http://dev.rubyonrails.org/svn/rails/tags/rel_1-2-1/">http://dev.rubyonrails.org/svn/rails/tags/rel_1-2-1/</a></li></ol><br /></li><li>Running the tests<br /><ol><li>From within the module under test (like activesupport/ or actionmailer/) just run "rake". All tests should execute and a report should be provided at the end. You can usually run tests individually as well, although a few depend on the side-effects of previous tests.</li><li>ActiveRecord requires some additional setup; I'll update this post with Tom's instructions and patches shortly.<br /></li></ol></li><br /><li>Reporting issues<br /><ol><li>Reporting failures in Rails is good</li><li>Reporting reduced test cases or clear explanations for failures in Rails is better</li><li>Reporting reduced test cases and including patches for failures in Rails is BEST</li><li>Don't forget to check if your issue has already been reported, and please sync up on the mailing list while you're working</li><li>Patches will probably not be accepted without a reusable test case. We're trying to grow our regression suite as a result of this work.<br /></li><li>JRuby's JIRA is here: <a href="http://jira.codehaus.org/browse/JRUBY">http://jira.codehaus.org/browse/JRUBY</a></li><br /></ol></li><li>Caveats, things to watch for, things to try<br /><ol><li>ActiveRecord (with the AR-JDBC adapter) could use wider DB testing. We've done quite a bit of work with MySQL and Tom has been improving Derby support, but there are lots of other databases out there. Pick your favorite database, follow Tom's instructions to get up and going, and report issues (in the JRuby JIRA at least, but also report to jruby-extras project if appropriate)</li><li>Railties includes code that will never run under JRuby, like its fcgi-based dispatcher tests. You should confirm with us that they're expected, and then ignore or delete them for your future runs.</li><li>Rails is a very...interesting...application to debug. Feel free to ask on-list if you simply don't get something. I've seen things in Rails code no man should have to see, so I know it can be frustrating to debug at times.</li></ol></li></ol>We're on the home stretch now, and Rails is getting more and more solid every day. With you all helping, we should be able to finish off the remaining failures, clean up major outstanding JRuby issues, and kick out a pretty sweet "Rails-supporting" JRuby release in the next couple weeks.<br /><br /><span style="font-style: italic;"><span style="font-weight: bold;">Update:</span></span> A couple folks pointed out that the codebase didn't compile under Java 1.4.2. That has been corrected!<br /><br /><span style="font-style: italic;"><span style="font-weight: bold;">Update 2:</span></span> A few folks are seeing a problem installing gems related to the %p operator to printf. We're working on that, and it's a fairly minor issue, but to avoid it there's one additional step before you install rake: set the JRUBY_HOME env var to the root of your JRuby stuff.